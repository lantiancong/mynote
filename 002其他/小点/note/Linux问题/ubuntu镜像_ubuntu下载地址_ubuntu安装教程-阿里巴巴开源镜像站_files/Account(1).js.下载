biu.define({name:"@ali/aliyun-com-adc-app-account",version:"0.1.9",dependencies:{}},(function(t,e,r){"use strict";var n=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=Reflect.get,f=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p=(t,e)=>{for(var r in e||(e={}))c.call(e,r)&&f(t,r,e[r]);if(a)for(var r of a(e))s.call(e,r)&&f(t,r,e[r]);return t},h=(t,e)=>o(t,i(e)),d=(t,e,r)=>new Promise(((n,o)=>{var i=t=>{try{u(r.next(t))}catch(e){o(e)}},a=t=>{try{u(r.throw(t))}catch(e){o(e)}},u=t=>t.done?n(t.value):Promise.resolve(t.value).then(i,a);u((r=r.apply(t,e)).next())})),y=window.__ADC_CORE__||{};y.event,y.bridge,y.uriScheme;var v=y.App;function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function E(t,e){if(t){if("string"==typeof t)return m(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function g(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||E(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t){var e=function(t,e){if("object"!=b(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==b(e)?e:e+""}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w(n.key),n)}}function O(t,e,r){return(e=w(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function _(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}y.getApp,y.hasApp,y.preloadApp;var A={exports:{}},L={exports:{}};!function(t){function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(L);var S=L.exports;!function(t){var e=S.default;function r(){t.exports=r=function(){return o},t.exports.__esModule=!0,t.exports.default=t.exports;var n,o={},i=Object.prototype,a=i.hasOwnProperty,u=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(U){p=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),a=new x(n||[]);return u(i,"_invoke",{value:P(t,r,a)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}o.wrap=h;var y="suspendedStart",v="suspendedYield",m="executing",E="completed",g={};function b(){}function w(){}function N(){}var O={};p(O,s,(function(){return this}));var I=Object.getPrototypeOf,_=I&&I(I(j([])));_&&_!==i&&a.call(_,s)&&(O=_);var A=N.prototype=b.prototype=Object.create(O);function L(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,r){function n(o,i,u,c){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==e(f)&&a.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,u,c)}),(function(t){n("throw",t,u,c)})):r.resolve(f).then((function(t){l.value=t,u(l)}),(function(t){return n("throw",t,u,c)}))}c(s.arg)}var o;u(this,"_invoke",{value:function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}})}function P(t,e,r){var o=y;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===E){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=C(u,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===y)throw o=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var s=d(t,e,r);if("normal"===s.type){if(o=r.done?E:v,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=E,r.method="throw",r.arg=s.arg)}}}function C(t,e){var r=e.method,o=t.iterator[r];if(o===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,C(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function j(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(a.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}throw new TypeError(e(t)+" is not iterable")}return w.prototype=N,u(A,"constructor",{value:N,configurable:!0}),u(N,"constructor",{value:w,configurable:!0}),w.displayName=p(N,f,"GeneratorFunction"),o.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,N):(t.__proto__=N,p(t,f,"GeneratorFunction")),t.prototype=Object.create(A),t},o.awrap=function(t){return{__await:t}},L(S.prototype),p(S.prototype,l,(function(){return this})),o.AsyncIterator=S,o.async=function(t,e,r,n,i){void 0===i&&(i=Promise);var a=new S(h(t,e,r,n),i);return o.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(A),p(A,f,"Generator"),p(A,s,(function(){return this})),p(A,"toString",(function(){return"[object Generator]"})),o.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},o.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return u.type="throw",u.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),g}},o}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(A);var P=(0,A.exports)(),C=P;try{regeneratorRuntime=P}catch(Ct){"object"==typeof globalThis?globalThis.regeneratorRuntime=P:Function("r","regeneratorRuntime = r")(P)}const T=_(C);function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var j=(Date.now()+Math.random()).toString(36).replace(".","");function U(t,e){return F.apply(this,arguments)}function F(){var t;return t=T.mark((function t(e,r){var n,o,i;return T.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return",Promise.resolve(!0));case 2:if(n="".concat("https://www.aliyun.com/api/log","/").concat(r.biz||"unknown"),o=JSON.stringify(e.map((function(t){return x(x({},t),{},{sessionId:j})}))),!navigator.sendBeacon){t.next=9;break}return i=navigator.sendBeacon(n,o),t.abrupt("return",Promise.resolve(i));case 9:return t.next=11,fetch(n,{method:"POST",body:o});case 11:if(200!==t.sent.status){t.next=14;break}return t.abrupt("return",!0);case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})),F=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){I(i,n,o,a,u,"next",t)}function u(t){I(i,n,o,a,u,"throw",t)}a(void 0)}))},F.apply(this,arguments)}var D=!1,k=new Map,G=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,"queue",void 0),O(this,"reporter",void 0),O(this,"listeners",void 0),O(this,"options",void 0),k.has(e.biz))return k.get(e.biz);k.set(e.biz,this),this.options=e,this.queue=[],this.listeners={},D||(window.addEventListener("beforeunload",(function(){k.forEach((function(t){t.emit("beforeunload"),U(t.queue,{biz:t.options.biz})}))})),D=!0)},(e=[{key:"report",value:function(t){var e=this;Array.isArray(t)?this.queue=[].concat(g(this.queue),g(t)):this.queue.push(t),this.reporter||(this.reporter=Promise.resolve().then((function(){U(e.queue,{biz:e.options.biz}),e.queue=[],e.reporter=null})))}},{key:"on",value:function(t,e){var r=this;return this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e),function(){return r.off(t,e)}}},{key:"off",value:function(t,e){if(this.listeners[t]){var r=this.listeners[t].indexOf(e);-1!==r&&this.listeners[t].splice(r,1)}}},{key:"emit",value:function(t){this.listeners[t]&&this.listeners[t].forEach((function(t){t()}))}}])&&N(t.prototype,e),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),V="__MONITOR__";window[V]||(window[V]=G);const M=new(0,window[V])({biz:"adc-app-account"});function $(t){return"string"==typeof t?t:t&&t.message?t.message:void 0}function z(t){return d(this,arguments,(function*(t,e={}){let r=null;try{r=yield fetch(t,{credentials:e.includeCookie?"include":void 0})}catch(i){throw M.report({type:"api-error",url:t,status:-1,error:$(i)}),i}const n=r.headers.get("eagleeye-traceid")||r.headers.get("eagleid");if(200!==r.status)throw M.report({type:"api-error",url:t,status:r.status,traceId:n}),new Error(`\u63a5\u53e3 ${t} \u8bf7\u6c42\u9519\u8bef\uff0ccode: ${r.status}`);let o;try{o=yield r.json()}catch(i){throw M.report({type:"api-error",url:t,status:-2,error:$(i),traceId:n}),i}return e.reportNullData&&!(null==o?void 0:o.data)&&M.report({type:"data-null",url:t,traceId:n,data:o}),o}))}function Y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t||{}).reduce((function(e,r){return e[r]=function(t){var e={};return Object.keys(t).forEach((function(r){var n=t[r];"true"===n?e[r]=!0:"false"===n?e[r]=!1:/^\d+$/.test(n)?e[r]=Number(n):e[r]=n})),e}(t[r]),e}),{})}function H(t,e){t.ONE="one"===e.portalType,t.PRIVATE_CLOUD="true"===e.IS_PRIVATE_CLOUD,t.ENV=e.fEnv||t.ENV,t.CHANNEL=e.CHANNEL||t.CHANNEL,t.LANG=e.LANG||t.LANG,t.LOCALE=e.LOCALE||t.LOCALE,t.SEC_TOKEN=e.SEC_TOKEN||t.SEC_TOKEN,t.ACCOUNT={ID:e.CURRENT_PK||t.ACCOUNT.ID,ID_MAIN:e.MAIN_ACCOUNT_PK||t.ACCOUNT.ID_MAIN,TYPE:e.ACCOUNT_TYPE||t.ACCOUNT.TYPE,CERTIFIED:"true"===e.IS_CERTIFIED},t.APP_ID=e.APP_ID||"",t.REGIONS=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){var e=t.regionId,r=t.name,n=t.physicalList,o=void 0===n?[]:n,i=t.zoneList,a=void 0===i?[]:i;return{id:e,name:r||e,physicalIds:o.map((function(t){return t.id})).filter((function(t){return t})),zones:a.map((function(t){return{id:t.zoneId,name:t.name}}))}}))}(e.REGIONS),t.OPEN_STATUS=Y(e.OPEN_STATUS),t.LINK=e.CHANNEL_LINKS||t.LINK,t.FEATURE_SWITCH=e.CHANNEL_FEATURE_STATUS||t.FEATURE_SWITCH,t.FEATURE_GRAY=e.FEATURE_STATUS||t.FEATURE_GRAY,t.API_RESULT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,r){var n=t[r];return n&&"200"===n.code&&void 0!==n.data&&(e[r]=n.data),e}),{})}(e.STATIC_API),t.RULE_CONFIG=e.RULE_CONFIG||t.RULE_CONFIG,t.LABELS=e.LABELS||t.LABELS,t.USER_PREFERENCE=e.USER_PREFERENCE||t.USER_PREFERENCE,t.NEW_VERSION="true"===e.NEW_VERSION}const K=(B={ONE:!1,PRIVATE_CLOUD:!1,ENV:"prod",CHANNEL:"OFFICIAL",LANG:"zh",LOCALE:"zh-CN",SEC_TOKEN:"",ACCOUNT:{ID:"",ID_MAIN:"",TYPE:"main",CERTIFIED:!1},APP_ID:"",REGIONS:[],OPEN_STATUS:{},LINK:{},FEATURE_SWITCH:{},FEATURE_GRAY:{},API_RESULT:{},RULE_CONFIG:{},LABELS:{},USER_PREFERENCE:{},NEW_VERSION:!1},(q="undefined"!=typeof window?window.ALIYUN_CONSOLE_CONFIG:void 0)&&H(B,q),"zh-TW"===B.LOCALE&&(B.LANG="zh-TW"),B);var B,q,W;function J(){return W||(W=function(){try{return new Function("","return window")()}catch(t){return null}}()||function(){try{var t;return(null===(t=window.document.getElementsByTagName("html")[0])||void 0===t?void 0:t.ownerDocument.defaultView)||null}catch(e){return null}}()||window),W}var Q=function(t){return t.DEV="dev",t.DAILY="daily",t.PRE="pre",t.PROD="prod",t}({});function Z(){var t,e=window.location,r=e.protocol,n=e.hostname;return e.port||/^127(?:\.0\.0)?\.1$|^0\.0\.0\.0$|^localhost$/.test(n)?Q.DEV:K.ONE&&"daily"===K.ENV||/\.test$/.test(n)||/daily-|-daily/i.test(n)?Q.DAILY:K.ONE&&"pre"===K.ENV||!K.ONE&&["pre","validate"].includes((null===(t=window.$BUY_CONFIG)||void 0===t?void 0:t.env)||"")||/pre-|-pre/i.test(n)||"http:"===r?Q.PRE:Q.PROD}function X(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(l){s=!0,o=l}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(t,e)||E(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t){return("undefined"!=typeof document&&document.cookie?document.cookie.split(/\s*;\s*/).reduce((function(t,e){var r=X(e.split("="),2),n=r[0],o=r[1];try{t[n]=decodeURIComponent(o)}catch(i){t[n]=unescape(o)}return t}),{}):{})[t]}const et=(ct=J().location.hostname,st=Z(),lt=tt("aliyun_site")||"CN",ft=st===Q.DEV,pt=st===Q.DAILY,ht=st===Q.PRE,dt=st===Q.PROD,yt=/4service/.test(ct),vt=/\.test$/.test(ct),mt=/\.console\.aliyun\.(?:com|test)$/.test(ct),Et="".concat(yt?"fecs4service":ft||ht?"pre-fecs":"fecs"),gt=(null===(ut=ct.match(/[^.]+(?=\.[^.]+$)/))||void 0===ut?void 0:ut[0])||"aliyun",bt="".concat(vt?"test":"com"),wt="".concat(Et,".console.").concat(gt,".").concat(bt),Nt="https://".concat(wt),{ENV:st,ENV_IS_DEV:ft,ENV_IS_DAILY:pt,ENV_IS_PRE:ht,ENV_IS_PROD:dt,APP_ID:K.APP_ID,DOMAIN_IS_4SERVICE:yt,DOMAIN_IS_CONSOLE:mt,SITE:lt,CHANNEL:(rt=lt,nt=window,ot=nt.ALIYUN_ECS_CONSOLE_CONFIG,it=nt.$BUY_CONFIG,at="",K.ONE?at=K.CHANNEL:ot?at=ot.channel:it&&(at=it.channelId),at||function(t){switch(t){case"INTL":return"SIN";case"JP":return"JP";case"CN":return"OFFICIAL";default:return t}}(rt)),FECS_HOST:wt,FECS_URL_BASE:Nt}).FECS_HOST;var rt,nt,ot,it,at,ut,ct,st,lt,ft,pt,ht,dt,yt,vt,mt,Et,gt,bt,wt,Nt;function Ot(){return d(this,arguments,(function*(t={}){const{code:e,data:r}=yield z("https://bridge.aliyun.com/abs/home/queryUserBaseInfo?revert="+(!1===t.isDesensitized?"true":""),{includeCookie:!0});if("USER_NOT_LOGIN"===e||!r)return null;1===r.accountType&&(r.accountType=2);let n="https://img.alicdn.com/imgextra/i1/O1CN01Qby8sF1eNTQrDNZqK_!!6000000003859-0-tps-128-128.jpg";r.accountPic&&(n=/oss\.aliyuncs\.com/.test(r.accountPic)?r.accountPic:`https://oss.aliyuncs.com/aliyun_id_photo_bucket/${r.accountPic}`);const o={accountPic:n,accountType:r.accountType,certificated:r.certificated,certifyAccountType:r.certifyAccountType};if(2===r.accountType)return h(p({},o),{userId:r.userId,userNick:r.userNick});const{code:i,data:a}=yield function(){return d(this,null,(function*(){return yield z(`https://${et}/api/console-base/account?credentials=include`,{includeCookie:!0,reportNullData:!0})}))}();if("ConsoleNeedLogin"===i)return null;if(!a)return h(p({},o),{userId:r.userId,userNick:r.userNick});switch(r.accountType){case 3:return h(p({},o),{userId:a.currentId,userNick:a.aliyunId,mainAccountPk:a.aliuid,mainAccountName:a.mainAliyunId,parentPK:a.aliuid,currentName:a.currentName,currentAlias:a.currentAlias});case 4:let t={};return a.loginName&&a.loginAlias&&(t={loginName:a.loginName,loginAlias:a.loginAlias,loginAccountType:a.loginStructure}),p(h(p({},o),{userId:null,userNick:a.aliyunId,mainAccountPk:a.aliuid,mainAccountName:a.mainAliyunId,parentPK:a.aliuid,currentName:a.currentName,currentAlias:a.currentAlias}),t)}}))}function It(t){return new Promise((function(e,r){const n=document.createElement("script");n.src=t,n.crossOrigin="",n.onload=e,n.onerror=r,document.body.appendChild(n)}))}let _t,At,Lt=null,St=null;class Pt extends v{constructor(t){var e,r;super(t),f(this,"symbol"!=typeof(e="_listenLoginMessage")?e+"":e,r),this._listenLoginMessage=({data:t})=>{if(t&&"object"==typeof t)switch(t.type){case"login":"true"!==t.success&&!0!==t.success||this.updateUserInfo();break;case"register":!0===t.success&&"pageInit"===t.data.scene&&this.updateUserInfo()}},window.addEventListener("message",this._listenLoginMessage),this.updateUserInfo()}destructor(){return d(this,null,(function*(){var t,e,r;yield(t=Pt.prototype,e=this,r="destructor",l(u(t),r,e)).call(this),window.removeEventListener("message",this._listenLoginMessage)}))}get isLogin(){return this.getUserInfo().then((()=>_t))}get isCertified(){return this.getUserInfo().then((()=>At))}get userInfo(){return this.getUserInfo().then((()=>St))}updateUserInfo(){return Lt=Ot().then((t=>(St=t,_t=!!t,At=t?t.certificated:void 0,this.$nextProperty("userInfo",St),this.$nextProperty("isLogin",_t),this.$nextProperty("isCertified",At),St)))}getUserInfo(){return Lt||this.updateUserInfo()}login(){return new Promise((t=>d(this,null,(function*(){window.FastLogin||(yield It("https://g.alicdn.com/dawn/assets-loader/scripts/fast-login.js?tenantName=website")),window.FastLogin("show",[{loginCallback:e=>{e&&"true"===e.success?t(!0):t(!1)}}])}))))}register(){return new Promise((t=>d(this,null,(function*(){window.FastLogin||(yield It("https://g.alicdn.com/dawn/assets-loader/scripts/fast-login.js?tenantName=website")),window.FastLogin("show",[{custom:{pageType:"REGISTER"},loginCallback:e=>{e&&"true"===e.success?t(!0):t(!1)}}])}))))}certify(t){return new Promise((e=>d(this,null,(function*(){window.FastAuth||(yield It("https://o.alicdn.com/dawn/fe-fast-auth/index.js"));const r=new window.FastAuth({channel:"OFFICIAL_SITE",env:"prod"});r.show({onFinish:()=>{At=!0,this.$nextProperty("isCertified",At),e(At)},onClose:()=>{r.hide(),e(!1)},subjectType:t.subjectType})}))))}}r.exports=Pt}));
